"use strict";(self.webpackChunkpain_sense=self.webpackChunkpain_sense||[]).push([[622],{5017:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>o});var s=i(4848),t=i(8453);const r={},a=void 0,l={id:"Development/Processing",title:"Processing",description:"Data Processing Pipeline: Labeling and Feature Extraction",source:"@site/docs/Development/Processing.md",sourceDirName:"Development",slug:"/Development/Processing",permalink:"/docs/Development/Processing",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"projectSidebar",previous:{title:"FrontEnd",permalink:"/docs/Development/FrontEnd"},next:{title:"RealTime",permalink:"/docs/Development/RealTime"}},c={},o=[{value:"Data Processing Pipeline: Labeling and Feature Extraction",id:"data-processing-pipeline-labeling-and-feature-extraction",level:2},{value:"1. Data Labeling",id:"1-data-labeling",level:3},{value:"Labeling Workflow:",id:"labeling-workflow",level:4},{value:"2. Feature Extraction",id:"2-feature-extraction",level:3},{value:"Feature Extraction Logic:",id:"feature-extraction-logic",level:4},{value:"Signal-Specific Processing Methods",id:"signal-specific-processing-methods",level:3},{value:"A. ECG (Electrocardiogram)",id:"a-ecg-electrocardiogram",level:4},{value:"B. GSR (Galvanic Skin Response)",id:"b-gsr-galvanic-skin-response",level:4},{value:"C. PPG (Photoplethysmography / BVP)",id:"c-ppg-photoplethysmography--bvp",level:4},{value:"Publishing Processed Data",id:"publishing-processed-data",level:3}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"data-processing-pipeline-labeling-and-feature-extraction",children:"Data Processing Pipeline: Labeling and Feature Extraction"}),"\n",(0,s.jsxs)(n.p,{children:["The data processing pipeline is divided into two main stages: ",(0,s.jsx)(n.strong,{children:"labeling"})," and ",(0,s.jsx)(n.strong,{children:"feature extraction"}),". These steps ensure that raw sensor data is contextually enriched and transformed into meaningful physiological indicators for analysis and visualization."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"1-data-labeling",children:"1. Data Labeling"}),"\n",(0,s.jsxs)(n.p,{children:["Each monitoring session (referred to as an ",(0,s.jsx)(n.em,{children:"experiment"}),") is created via the frontend and assigned a unique ",(0,s.jsx)(n.code,{children:"experimentId"}),". This identifier is automatically linked to the messages sent by the ESP32 device, allowing for ",(0,s.jsx)(n.strong,{children:"automatic labeling of incoming data"}),"."]}),"\n",(0,s.jsx)(n.h4,{id:"labeling-workflow",children:"Labeling Workflow:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["A Kafka consumer listens to the topic ",(0,s.jsx)(n.code,{children:"SensorData"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Upon receiving a new message, it appends the relevant ",(0,s.jsx)(n.code,{children:"experimentId"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The labeled data is then published to the topic ",(0,s.jsx)(n.code,{children:"ProcessedData"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Telegraf consumes the labeled data and forwards it to ",(0,s.jsx)(n.strong,{children:"InfluxDB"}),", where it is stored in a structured format for future queries and dashboard visualizations."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This process ensures that every data sample is clearly attributed to its corresponding experiment, maintaining a clean separation by session or context."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"2-feature-extraction",children:"2. Feature Extraction"}),"\n",(0,s.jsxs)(n.p,{children:["Beyond labeling, the system performs ",(0,s.jsx)(n.strong,{children:"temporal and physiological analysis"})," of the raw signals from ECG, GSR, and PPG (BVP) sensors. A dedicated Kafka consumer handles this stage in a ",(0,s.jsx)(n.strong,{children:"distributed and continuous"})," manner."]}),"\n",(0,s.jsx)(n.h4,{id:"feature-extraction-logic",children:"Feature Extraction Logic:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Circular buffers are maintained per ",(0,s.jsx)(n.code,{children:"deviceId"}),", accumulating samples over time."]}),"\n",(0,s.jsx)(n.li,{children:"At defined intervals (e.g., every 5 seconds), the system checks if there's enough data to extract meaningful features."}),"\n",(0,s.jsxs)(n.li,{children:["Processing is done using the ",(0,s.jsx)(n.strong,{children:"NeuroKit2"})," Python library."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"signal-specific-processing-methods",children:"Signal-Specific Processing Methods"}),"\n",(0,s.jsx)(n.h4,{id:"a-ecg-electrocardiogram",children:"A. ECG (Electrocardiogram)"}),"\n",(0,s.jsx)(n.p,{children:"The ECG signal captures the heart's electrical activity. From this, the system computes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Heart Rate (HR)"})," \u2013 Beats per minute (bpm), a direct indicator of cardiac activity."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Heart Rate Variability (HRV)"})," \u2013 Assesses the variation between consecutive beats (RR intervals), reflecting autonomic nervous system balance."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"HRV Metrics Extracted:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"SDNN"}),": Standard deviation of RR intervals."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"RMSSD"}),": Root mean square of differences between successive RR intervals."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pNN50"}),": Percentage of RR intervals differing by more than 50ms."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These metrics provide deep insight into cardiovascular and autonomic nervous system health."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h4,{id:"b-gsr-galvanic-skin-response",children:"B. GSR (Galvanic Skin Response)"}),"\n",(0,s.jsx)(n.p,{children:"GSR measures skin conductance, which varies with sweat gland activity\u2014an indicator of emotional and physiological arousal."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"GSR Components:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tonic (SCL)"}),": Skin Conductance Level \u2013 Baseline arousal state."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Phasic (SCRs)"}),": Skin Conductance Responses \u2013 Quick responses to stimuli."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Features extracted include:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Number of SCRs"}),"\n",(0,s.jsx)(n.li,{children:"Mean SCR amplitude"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"These reflect sympathetic nervous system reactivity."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h4,{id:"c-ppg-photoplethysmography--bvp",children:"C. PPG (Photoplethysmography / BVP)"}),"\n",(0,s.jsx)(n.p,{children:"PPG assesses peripheral blood volume using light reflection. From this signal, the following metric is extracted:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Perfusion Index (PI)"})," \u2013 The ratio between:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"AC Component"}),": Pulsatile blood flow (heartbeat-driven)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DC Component"}),": Static blood volume"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["PI is an indirect indicator of ",(0,s.jsx)(n.strong,{children:"peripheral circulation"})," and vascular health."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"publishing-processed-data",children:"Publishing Processed Data"}),"\n",(0,s.jsx)(n.p,{children:"Once valid features are extracted (from at least one signal), the system:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Aggregates them into a ",(0,s.jsx)(n.strong,{children:"JSON object"})," including:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Extracted features"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"deviceId"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Publishes the message to the Kafka topic ",(0,s.jsx)(n.code,{children:"hrData"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Only messages containing meaningful data are published, ensuring efficiency and preventing noise in the system."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Finally, the enriched metrics are stored in ",(0,s.jsx)(n.strong,{children:"InfluxDB"}),", enabling historical queries, dashboard visualization, and advanced time-series analytics."]}),"\n",(0,s.jsx)("img",{src:"/img/Processed.png",alt:"A cute kitten"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var s=i(6540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);