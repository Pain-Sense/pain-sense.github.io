## Domain Model
<img src="/img/DataModel.png" alt="A cute kitten" />

Our solution integrates structured (relational) data with real-time and time-series data. To achieve this, the system uses two complementary databases:

- **MySQL:** Stores structured and static data such as patients, devices, and clinical experiments.
- **InfluxDB:** Stores continuous physiological data captured by IoT sensors, including both raw values and processed/enriched data.

### Relational Model (MySQL)

The relational database consists of three main tables:

- **patients:** Stores information about monitored patients, including name, age, gender, and health condition.
- **devices:** Records the devices available in the system, such as ECG sensors, along with their current status.
- **experiments:** Links a patient to a device during a monitoring period, including notes and the experimentâ€™s active/inactive status.

**Relationships:**

- Each experiment is linked to one patient and one device.
- When a patient is deleted, their related experiments are also removed.
- When a device is deleted, the `device_id` field in experiments is set to null.

### Temporal Model (InfluxDB)

The InfluxDB database stores real-time physiological data with high temporal resolution. The main measurements (similar to tables) are:

- **sensor_data:**  
  Contains raw data directly from devices. Each data point is identified by a `deviceId` and includes fields such as ECG, BVP, GSR, and other physiological signals.

- **processed_sensor_data:**  
  Stores the same sensor data but enriched with contextual information like `experimentId`, indicating when a device is used in an active experiment. This separation helps distinguish general data from clinical or experimental data.

- **enriched_hr_data:**  
  Contains advanced physiological metrics extracted during processing. Alongside the original sensor fields, it includes derived variables like heart rate (HR), heart rate variability (HRV), and other indicators generated by Python scripts.

### Integration Between Models

The connection between MySQL and InfluxDB data is mainly done through the `deviceId` and `experimentId` identifiers. These allow:

- Linking time-series data to patients and monitoring contexts (experiments).  
- Performing retrospective analyses based on physiological signal history.  
- Supporting dashboards for real-time and historical data visualization and personalized alerts.

